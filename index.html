<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Maxi LingLing — Die tapfere Giraffe</title>
  <meta name="description" content="Die Geschichte von Maxi LingLing, einer mutigen LingLing-Giraffe. Eine kleine Website mit Bildern, Geschichte und Aktivitäten." />
  <link rel="stylesheet" href="styles.css" />
  <style>
    /* Chaos Chat Styling */
    .chaos-chat-button {
      position: fixed;
      bottom: 20px;
      right: 20px;
      z-index: 9999;
      padding: 10px 15px;
      font-size: 16px;
      cursor: pointer;
      border-radius: 5px;
      background-color: #222;
      color: lime;
      border: 1px solid lime;
    }

    .chaos-chat-overlay {
      position: fixed;
      top:0;
      left:0;
      width:100%;
      height:100%;
      background-color: rgba(0,0,0,0.95);
      color: lime;
      font-family: monospace;
      z-index: 10000;
      display: flex;
      flex-direction: column;
    }

    .chaos-chat-header {
      display:flex;
      justify-content: space-between;
      align-items: center;
      padding:10px;
      border-bottom:1px solid lime;
    }

    .chaos-chat-header button {
      background:none;
      border:none;
      color: lime;
      cursor:pointer;
      font-size: 18px;
    }

    .chaos-chat-box {
      flex:1;
      overflow-y:auto;
      padding:10px;
      white-space: pre-wrap;
    }

    .chaos-chat-inputbar {
      display:flex;
      gap:5px;
      padding:10px;
      border-top:1px solid lime;
    }

    .chaos-chat-inputbar input[type="text"] {
      flex:1;
      padding:5px;
      font-size:14px;
    }

    .chaos-chat-inputbar button {
      cursor:pointer;
    }
  </style>
</head>
<body>
  <header class="site-header">
    <div class="container header-inner">
      <a class="logo" href="#" aria-label="Maxi LingLing Startseite">
        <img src="assets/maxi-lingling.svg" alt="Illustration von Maxi LingLing" class="logo-img" />
        <span class="site-title">Maxi LingLing</span>
      </a>

      <nav class="main-nav" aria-label="Hauptnavigation">
        <button id="navToggle" class="nav-toggle" aria-expanded="false" aria-controls="navList">Menü</button>
        <ul id="navList" class="nav-list" hidden>
          <li><a href="#geschichte">Geschichte</a></li>
          <li><a href="#abenteuer">Abenteuer</a></li>
          <li><a href="#galerie">Galerie</a></li>
          <li><a href="#spiele">Spiele</a></li>
          <li><a href="#kontakt">Kontakt</a></li>
        </ul>
      </nav>
    </div>
  </header>

  <main>
    <section class="hero" aria-labelledby="hero-title">
      <div class="container hero-grid">
        <div class="hero-text">
          <h1 id="hero-title">Maxi LingLing — Die tapfere LingLing-Giraffe</h1>
          <p class="lead">Lerne Maxi kennen: freundlich, neugierig und immer bereit, anderen zu helfen — egal wie groß die Herausforderung ist.</p>
          <p><a class="cta" href="#geschichte">Mehr über Maxi</a></p>
        </div>

        <div class="hero-art" aria-hidden="true">
          <img src="assets/maxi-lingling.svg" alt="" class="hero-img" />
        </div>
      </div>
    </section>

    <section id="geschichte" class="section" aria-labelledby="geschichte-title">
      <div class="container">
        <h2 id="geschichte-title">Die Geschichte von Maxi</h2>
        <p>
          Maxi LingLing wurde in einer sonnigen Savanne geboren. Schon als kleines Giraffenkind zeigte Maxi großen Mut:
          Wenn ein anderer Freund Hilfe brauchte, lief Maxi sofort los — auch wenn die Aufgabe schwierig aussah.
          Maxi glaubt, dass Freundlichkeit und Mut die Welt besser machen.
        </p>

        <blockquote class="quote" aria-label="Zitat von Maxi">
          „Manchmal ist ein kleiner Schritt mutiger als ein großer Sprung.“ — Maxi LingLing
        </blockquote>

        <h3>Was Maxi besonders macht</h3>
        <ul>
          <li>Großes Herz: Maxi hilft immer Freunden in Not.</li>
          <li>Neugier: Maxi erkundet neue Orte und lernt jeden Tag dazu.</li>
          <li>Respektvoll: Maxi hört zu und zeigt Verständnis.</li>
        </ul>
      </div>
    </section>

    <section id="abenteuer" class="section alt" aria-labelledby="abenteuer-title">
      <div class="container">
        <h2 id="abenteuer-title">Abenteuer & Lektionen</h2>
        <article class="card">
          <h3>Der mutige Fluss</h3>
          <p>
            Als der Fluss nach einem großen Regen stark war, half Maxi zwei kleinen Flamingos, das andere Ufer zu erreichen.
            Maxi baute eine kleine Brücke aus Ästen und hielt alle sicher. So lernten die Flamingos: Zusammen schaffen wir alles.
          </p>
        </article>

        <article class="card">
          <h3>Der hohe Hügel</h3>
          <p>
            Maxi überwand seine eigene Angst vor Höhe, um von einem Hügel aus die Richtung eines verlorenen Zebra-Füchsers zu zeigen.
            Manchmal bedeutet Mut, seine eigenen Grenzen zu erkennen — und trotzdem zu handeln.
          </p>
        </article>
      </div>
    </section>

    <section id="galerie" class="section" aria-labelledby="galerie-title">
      <div class="container">
        <h2 id="galerie-title">Galerie</h2>
        <div class="gallery" role="list">
          <figure role="listitem" class="gallery-item">
            <img src="assets/maxi-lingling.svg" alt="Maxi lächelt freundlich" />
            <figcaption>Maxi lächelt</figcaption>
          </figure>
          <figure role="listitem" class="gallery-item">
            <img src="assets/giraffe-happy.svg" alt="Maxi springt vor Freude" />
            <figcaption>Maxi ist glücklich</figcaption>
          </figure>
          <figure role="listitem" class="gallery-item">
            <img src="assets/giraffe-eating.svg" alt="Maxi frisst Blätter vom Baum" />
            <figcaption>Maxi frisst Blätter</figcaption>
          </figure>
          <figure role="listitem" class="gallery-item">
            <img src="assets/giraffe-running.svg" alt="Maxi läuft und spielt" />
            <figcaption>Maxi läuft</figcaption>
          </figure>
          <figure role="listitem" class="gallery-item">
            <img src="assets/giraffe-sleeping.svg" alt="Maxi schläft friedlich" />
            <figcaption>Maxi schläft</figcaption>
          </figure>
          <figure role="listitem" class="gallery-item">
            <img src="assets/giraffe-baby.svg" alt="Kleine Baby-Giraffe" />
            <figcaption>Baby Giraffe</figcaption>
          </figure>
        </div>
      </div>
    </section>

    <section id="spiele" class="section alt" aria-labelledby="spiele-title">
      <div class="container">
        <h2 id="spiele-title">Giraffen-Spiele</h2>
        <p>Spiele mit Maxi und hab Spaß! Wähle ein Spiel aus:</p>
        <!-- Memory / Click / Quiz Games bleiben unverändert -->
      </div>
    </section>

    <section id="kontakt" class="section" aria-labelledby="kontakt-title">
      <div class="container">
        <h2 id="kontakt-title">Kontakt</h2>
        <p>Hast du eine Idee für ein neues Abenteuer oder möchtest du Maxi eine Nachricht schicken?</p>

        <form class="contact-form" onsubmit="submitForm(event)" aria-label="Kontaktformular">
          <label>
            Dein Name
            <input type="text" name="name" id="name" required />
          </label>

          <label>
            Nachricht
            <textarea name="message" id="message" rows="4" required></textarea>
          </label>

          <button type="submit" class="btn">Senden</button>
        </form>

        <p class="small">Alternativ: <a href="mailto:maxi@lingling.example">maxi@lingling.example</a></p>
      </div>
    </section>

  </main>

  <footer class="site-footer" role="contentinfo">
    <div class="container footer-inner">
      <p>© <span id="year"></span> Maxi LingLing — Sei mutig, sei freundlich.</p>
      <p class="small">Design: Simple & freundlich — Für Kinder und Junggebliebene.</p>
    </div>
  </footer>

  <!-- Chaos Chat Script -->
  <script>
  class ChaosChat {
    constructor(apiEndpoint = "https://tobiobis.pythonanywhere.com/api/chat") {
      this.api = apiEndpoint;
      this.initButton();
      this.pollEvents();
    }

    initButton() {
      this.button = document.createElement("button");
      this.button.textContent = "Open Chaos Chat";
      this.button.className = "chaos-chat-button";
      document.body.appendChild(this.button);
      this.button.addEventListener("click", () => this.openChat());
    }

    openChat() {
      this.overlay = document.createElement("div");
      this.overlay.className = "chaos-chat-overlay";
      document.body.appendChild(this.overlay);

      const header = document.createElement("div");
      header.className = "chaos-chat-header";
      header.innerHTML = "<strong>Chaos Chat</strong>";
      const closeBtn = document.createElement("button");
      closeBtn.textContent = "X";
      closeBtn.onclick = () => this.overlay.remove();
      header.appendChild(closeBtn);
      this.overlay.appendChild(header);

      this.chatBox = document.createElement("div");
      this.chatBox.className = "chaos-chat-box";
      this.overlay.appendChild(this.chatBox);

      const inputBar = document.createElement("div");
      inputBar.className = "chaos-chat-inputbar";

      this.textInput = document.createElement("input");
      this.textInput.type = "text";
      this.textInput.placeholder = "Type chaos...";

      const sendBtn = document.createElement("button");
      sendBtn.textContent = "Send";
      sendBtn.onclick = () => this.sendMessage();

      this.fileInput = document.createElement("input");
      this.fileInput.type = "file";

      const sendFileBtn = document.createElement("button");
      sendFileBtn.textContent = "Send File";
      sendFileBtn.onclick = () => this.sendFile();

      inputBar.appendChild(this.textInput);
      inputBar.appendChild(sendBtn);
      inputBar.appendChild(this.fileInput);
      inputBar.appendChild(sendFileBtn);

      this.overlay.appendChild(inputBar);
    }

    async sendMessage() {
      const text = this.textInput.value.trim();
      if (!text) return;
      this.textInput.value = "";
      await fetch(this.api, {
        method:"POST",
        headers:{"Content-Type":"application/json"},
        body:JSON.stringify({type:"chat", payload:{text}})
      });
    }

    async sendFile() {
      const file = this.fileInput.files[0];
      if (!file) return;
      const reader = new FileReader();
      reader.onload = async () => {
        const base64 = reader.result.split(",")[1];
        const msg = `<file>${file.name}; ${file.type}; ${base64}</file>`;
        await fetch(this.api, {
          method:"POST",
          headers:{"Content-Type":"application/json"},
          body:JSON.stringify({type:"chat", payload:{text: msg}})
        });
      };
      reader.readAsDataURL(file);
      this.fileInput.value = "";
    }

    async pollEvents() {
      try {
        const res = await fetch(this.api, {
          method:"POST",
          headers:{"Content-Type":"application/json"},
          body:JSON.stringify({type:"poll", payload:{}})
        });
        const events = await res.json();
        events.forEach(e => this.addEvent(e));
      } catch(e) { console.error("ChaosChat poll failed", e); }
      setTimeout(() => this.pollEvents(), 500);
    }

    addEvent(event) {
      const msg = event.payload?.text;
      if (!msg || !this.chatBox) return;

      const div = document.createElement("div");
      div.style.marginBottom = "5px";

      const fileMatch = msg.match(/^<file>(.+); (.+); (.+)<\/file>$/);
      if (fileMatch) {
        const [_, name, type, base64] = fileMatch;
        let el;
        if (type.startsWith("image/")) {
          el = document.createElement("img");
          el.src = `data:${type};base64,${base64}`;
          el.style.maxWidth = "100%";
        } else if (type.startsWith("video/")) {
          el = document.createElement("video");
          el.src = `data:${type};base64,${base64}`;
          el.controls = true;
          el.style.maxWidth = "100%";
        } else if (type.startsWith("audio/")) {
          el = document.createElement("audio");
          el.src = `data:${type};base64,${base64}`;
          el.controls = true;
        } else if (type === "application/pdf") {
          el = document.createElement("iframe");
          el.src = `data:${type};base64,${base64}`;
          el.style.width="100%";
          el.style.height="400px";
        } else {
          el = document.createElement("a");
          el.href = `data:${type};base64,${base64}`;
          el.download = name;
          el.textContent = `Download: ${name}`;
        }
        div.appendChild(el);
      } else {
        div.textContent = msg;
      }

      this.chatBox.appendChild(div);
      this.chatBox.scrollTop = this.chatBox.scrollHeight;
    }
  }

  window.addEventListener("DOMContentLoaded", () => new ChaosChat());
  </script>

  <script src="script.js"></script>
</body>
</html>
